<div class="perfil-container">
  <app-tool-bar 
    (logoutRequest)="onLogout()">
  </app-tool-bar>

  <div class="content-wrapper">
    <h1 class="page-title">Mi perfil</h1>
    
    <!-- Sección de información del usuario -->
    <div class="user-info-section">
      <div class="user-avatar">
        <div class="avatar-placeholder"></div>
      </div>
      <div class="user-details">
        <h2 class="user-name">{{ userData?.nombre_completo }}</h2>
        <p class="user-role">{{ userData?.rol_nombre }}</p>
      </div>
    </div>

    <div class="main-content">
      <!-- Información Personal -->
      <div class="info-section">
        <h3 class="section-title">Información Personal</h3>
        <div class="info-item">
          <i class="fas fa-user icon"></i>
          <span>{{ userData?.nombre_usuario }}</span>
        </div>
        <div class="info-item">
          <i class="fas fa-envelope icon"></i>
          <span>{{ userData?.correo_electronico }}</span>
        </div>
        <div class="info-item">
          <i class="fas fa-check-circle icon"></i>
          <span>Activo: {{ userData?.activo ? 'Sí' : 'No' }}</span>
        </div>
        <div class="registration-info">
          <span class="registration-label">Registrado: {{ userData?.creado_en | date:'medium' }}</span>
        </div>
        <div class="d-flex gap-2">
          <button class="btn-update-info flex-fill" (click)="updateInfo()">Actualizar Información</button>
          <button class="btn-update-info flex-fill" (click)="openPasswordModal()">Cambiar Contraseña</button>
        </div>
      </div>

      <!-- Actividad -->
      <div class="activity-section">
        <h3 class="section-title">Actividad</h3>
        <div class="activity-item" *ngFor="let activity of activities">
          <i [class]="activity.icon + ' activity-icon'"></i>
          <span>{{ activity.description }}</span>
        </div>
        
        <!-- Finalizar sesión -->
        <div class="session-section">
          <h4 class="session-title">finalizar la sesión</h4>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal para cambiar contraseña -->
<app-cambiar-contrasena
  *ngIf="showPasswordModal"
  (closeModal)="closePasswordModal()">
</app-cambiar-contrasena>

<!-- Modal para actualizar información -->
<app-actualizar-informacion
  *ngIf="showInfoModal"
  (closeModal)="closeInfoModal()"
  (infoUpdated)="onInfoUpdated()">
</app-actualizar-informacion>