<div class="modal-overlay">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Subir Archivos</h2>
      <button class="close-btn" (click)="closeModal()">&times;</button>
    </div>
    <div class="modal-body">
      <div class="drop-area" (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)" (drop)="onDrop($event)">
        <div class="drop-content">
          <i class="upload-icon">üìÅ</i>
          <p>Arrastra y suelta archivos aqu√≠</p>
          <p>o</p>
          <button class="select-btn" (click)="selectFiles(fileInput)">Seleccionar archivos</button>
          <input type="file" #fileInput multiple accept=".pdf,.jpg,.png" style="display: none;" (change)="onFileSelected($event)">
        </div>
      </div>
      <div *ngIf="uploadedFiles.length > 0" class="uploaded-files-list">
        <h3>Archivos Subidos</h3>
        <ul>
          <li *ngFor="let fileObj of uploadedFiles; let i = index">
            <span>{{ fileObj.file.name }} ({{ formatFileSize(fileObj.file.size) }})</span>
            <select class="file-select" [(ngModel)]="fileObj.selectedConcept">
              <option value="" disabled>Tipo de documento</option>
              <option *ngFor="let concepto of conceptos" [value]="concepto">{{ concepto }}</option>
            </select>
            <select class="file-select" [(ngModel)]="fileObj.selectedExtension">
              <option value="" disabled>Extensi√≥n</option>
              <option *ngFor="let extension of extensiones" [value]="extension">{{ extension }}</option>
            </select>
            <button class="delete-btn" (click)="removeFile(i)">üóëÔ∏è</button>
          </li>
        </ul>
      </div>
      <div class="modal-footer">
        <button class="cancel-btn" (click)="closeModal()">Cancelar</button>
        <button class="upload-btn" (click)="uploadFiles()" *ngIf="uploadedFiles.length > 0" [disabled]="!isValidToUpload()">Subir {{ uploadedFiles.length }} Archivos</button>
      </div>
    </div>
  </div>
  <div *ngIf="showConfirmation" class="confirmation-overlay">
    <div class="confirmation-modal">
      <p>¬øEst√°s seguro de subir estos archivos?</p>
      <div class="confirmation-buttons">
        <button class="confirm-btn" (click)="confirmUpload()" [disabled]="uploading">S√≠</button>
        <button class="cancel-confirm-btn" (click)="cancelConfirmation()">No</button>
      </div>
    </div>
  </div>
</div>
